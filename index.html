<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basic Firewall Simulator</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.2rem;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .panel {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }
        
        .rules-panel {
            grid-column: 1;
        }
        
        .visualization-panel {
            grid-column: 2;
            min-height: 400px;
            position: relative;
            overflow: hidden;
            background: #ecf0f1;
            border: 2px solid #bdc3c7;
        }
        
        .logs-panel {
            grid-column: 3;
            max-height: 400px;
            overflow-y: auto;
        }
        
        h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
            border-bottom: 2px solid #eee;
            padding-bottom: 8px;
        }
        
        .rule-item {
            padding: 10px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 4px;
            border-left: 4px solid #3498db;
        }
        
        .rule-item.block {
            border-left-color: #e74c3c;
        }
        
        .rule-item.allow {
            border-left-color: #2ecc71;
        }
        
        .log-entry {
            padding: 8px 10px;
            border-bottom: 1px solid #eee;
            font-family: monospace;
            font-size: 0.9rem;
        }
        
        .log-entry.allowed {
            color: #2ecc71;
        }
        
        .log-entry.blocked {
            color: #e74c3c;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            background: #3498db;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #2980b9;
        }
        
        .traffic-packet {
            position: absolute;
            width: 30px;
            height: 20px;
            background: #3498db;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: bold;
            transition: left 0.5s linear, top 0.5s linear;
        }
        
        .firewall-line {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 4px;
            background: #e74c3c;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .label {
            position: absolute;
            font-weight: bold;
            color: #7f8c8d;
        }
        
        .internet-label {
            top: 10px;
            left: 25%;
        }
        
        .network-label {
            top: 10px;
            right: 25%;
        }
        
        .firewall-label {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #e74c3c;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            text-align: center;
        }
        
        .stat-item {
            padding: 15px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .stat-label {
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Basic Firewall Simulator</h1>
            <p class="subtitle">Visualize how firewalls filter network traffic based on rules</p>
        </header>
        
        <div class="dashboard">
            <div class="panel rules-panel">
                <h2>Firewall Rules</h2>
                <div id="rules-list">
                    <div class="rule-item allow">
                        <strong>Allow HTTP</strong><br>
                        Protocol: TCP, Port: 80
                    </div>
                    <div class="rule-item allow">
                        <strong>Allow HTTPS</strong><br>
                        Protocol: TCP, Port: 443
                    </div>
                    <div class="rule-item block">
                        <strong>Block FTP</strong><br>
                        Protocol: TCP, Port: 21
                    </div>
                    <div class="rule-item block">
                        <strong>Block Telnet</strong><br>
                        Protocol: TCP, Port: 23
                    </div>
                    <div class="rule-item allow">
                        <strong>Allow DNS</strong><br>
                        Protocol: UDP, Port: 53
                    </div>
                </div>
            </div>
            
            <div class="panel visualization-panel" id="visualization">
                <div class="firewall-line"></div>
                <div class="label internet-label">Internet</div>
                <div class="label network-label">Local Network</div>
                <div class="label firewall-label">Firewall</div>
                <!-- Traffic packets will be generated here -->
            </div>
            
            <div class="panel logs-panel">
                <h2>Firewall Logs</h2>
                <div id="logs-container">
                    <div class="log-entry allowed">Allowed: HTTP request from 192.168.1.5:80</div>
                    <div class="log-entry blocked">Blocked: FTP attempt from 10.0.0.2:21</div>
                    <div class="log-entry allowed">Allowed: HTTPS request from 192.168.1.5:443</div>
                    <div class="log-entry allowed">Allowed: DNS query from 192.168.1.3:53</div>
                    <div class="log-entry blocked">Blocked: Telnet attempt from 10.0.0.5:23</div>
                </div>
            </div>
        </div>
        
        <div class="controls">
            <button id="btn-add-rule">Add Rule</button>
            <button id="btn-start-traffic">Start Traffic</button>
            <button id="btn-stop-traffic">Stop Traffic</button>
            <button id="btn-reset">Reset</button>
        </div>
        
        <div class="stats">
            <div class="stat-item">
                <div class="stat-value" id="packets-sent">0</div>
                <div class="stat-label">Packets Sent</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="packets-allowed">0</div>
                <div class="stat-label">Packets Allowed</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="packets-blocked">0</div>
                <div class="stat-label">Packets Blocked</div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const visualization = document.getElementById('visualization');
            const logsContainer = document.getElementById('logs-container');
            const packetsSentElem = document.getElementById('packets-sent');
            const packetsAllowedElem = document.getElementById('packets-allowed');
            const packetsBlockedElem = document.getElementById('packets-blocked');
            
            let trafficInterval;
            let packetCounter = 0;
            let packetsSent = 0;
            let packetsAllowed = 0;
            let packetsBlocked = 0;
            
            // Firewall rules
            const firewallRules = [
                { protocol: 'TCP', port: 80, action: 'allow', description: 'HTTP' },
                { protocol: 'TCP', port: 443, action: 'allow', description: 'HTTPS' },
                { protocol: 'TCP', port: 21, action: 'block', description: 'FTP' },
                { protocol: 'TCP', port: 23, action: 'block', description: 'Telnet' },
                { protocol: 'UDP', port: 53, action: 'allow', description: 'DNS' }
            ];
            
            // Common ports and their services
            const commonServices = {
                80: 'HTTP',
                443: 'HTTPS',
                21: 'FTP',
                22: 'SSH',
                23: 'Telnet',
                25: 'SMTP',
                53: 'DNS',
                110: 'POP3',
                143: 'IMAP',
                993: 'IMAPS',
                995: 'POP3S',
                3306: 'MySQL',
                3389: 'RDP',
                27017: 'MongoDB'
            };
            
            // Generate random IP address
            function generateIP() {
                return `10.0.0.${Math.floor(Math.random() * 255)}`;
            }
            
            // Generate random traffic
            function generateTraffic() {
                packetCounter++;
                packetsSent++;
                packetsSentElem.textContent = packetsSent;
                
                const protocols = ['TCP', 'UDP'];
                const protocol = protocols[Math.floor(Math.random() * protocols.length)];
                
                // Get a random port from common services
                const ports = Object.keys(commonServices);
                const port = parseInt(ports[Math.floor(Math.random() * ports.length)]);
                
                const sourceIP = generateIP();
                
                // Create packet element
                const packet = document.createElement('div');
                packet.className = 'traffic-packet';
                packet.innerHTML = commonServices[port] || port;
                packet.dataset.protocol = protocol;
                packet.dataset.port = port;
                packet.dataset.source = sourceIP;
                
                // Position packet on the left (internet side)
                const top = 50 + Math.random() * 300;
                packet.style.top = `${top}px`;
                packet.style.left = '10px';
                
                visualization.appendChild(packet);
                
                // Check against firewall rules
                let action = 'block'; // Default deny
                let ruleMatch = null;
                
                for (const rule of firewallRules) {
                    if (rule.protocol === protocol && rule.port === port) {
                        action = rule.action;
                        ruleMatch = rule;
                        break;
                    }
                }
                
                // Move packet
                setTimeout(() => {
                    if (action === 'allow') {
                        packet.style.backgroundColor = '#2ecc71';
                        packet.style.left = 'calc(100% - 40px)';
                        packetsAllowed++;
                        packetsAllowedElem.textContent = packetsAllowed;
                        
                        // Add to log
                        const logEntry = document.createElement('div');
                        logEntry.className = 'log-entry allowed';
                        logEntry.textContent = `Allowed: ${commonServices[port] || port} from ${sourceIP}:${port}`;
                        logsContainer.appendChild(logEntry);
                    } else {
                        packet.style.backgroundColor = '#e74c3c';
                        packet.style.left = '50%';
                        packetsBlocked++;
                        packetsBlockedElem.textContent = packetsBlocked;
                        
                        // Add to log
                        const logEntry = document.createElement('div');
                        logEntry.className = 'log-entry blocked';
                        logEntry.textContent = `Blocked: ${commonServices[port] || port} from ${sourceIP}:${port}`;
                        logsContainer.appendChild(logEntry);
                    }
                    
                    // Remove packet after animation
                    setTimeout(() => {
                        packet.remove();
                    }, 2000);
                    
                    // Auto-scroll logs
                    logsContainer.scrollTop = logsContainer.scrollHeight;
                }, 100);
            }
            
            // Event listeners for buttons
            document.getElementById('btn-start-traffic').addEventListener('click', function() {
                if (!trafficInterval) {
                    trafficInterval = setInterval(generateTraffic, 1500);
                    generateTraffic(); // Generate one immediately
                }
            });
            
            document.getElementById('btn-stop-traffic').addEventListener('click', function() {
                clearInterval(trafficInterval);
                trafficInterval = null;
            });
            
            document.getElementById('btn-reset').addEventListener('click', function() {
                clearInterval(trafficInterval);
                trafficInterval = null;
                
                // Remove all packets
                const packets = document.querySelectorAll('.traffic-packet');
                packets.forEach(packet => packet.remove());
                
                // Reset counters
                packetsSent = 0;
                packetsAllowed = 0;
                packetsBlocked = 0;
                packetsSentElem.textContent = '0';
                packetsAllowedElem.textContent = '0';
                packetsBlockedElem.textContent = '0';
                
                // Clear logs
                logsContainer.innerHTML = '';
            });
            
            document.getElementById('btn-add-rule').addEventListener('click', function() {
                const protocol = prompt('Enter protocol (TCP/UDP):', 'TCP');
                if (!protocol || (protocol !== 'TCP' && protocol !== 'UDP')) {
                    alert('Protocol must be TCP or UDP');
                    return;
                }
                
                const port = parseInt(prompt('Enter port number:', '80'));
                if (isNaN(port) || port < 1 || port > 65535) {
                    alert('Port must be a number between 1 and 65535');
                    return;
                }
                
                const action = prompt('Action (allow/block):', 'allow');
                if (!action || (action !== 'allow' && action !== 'block')) {
                    alert('Action must be allow or block');
                    return;
                }
                
                // Add the new rule
                const description = commonServices[port] || `Port ${port}`;
                firewallRules.push({ protocol, port, action, description });
                
                // Update rules list
                const rulesList = document.getElementById('rules-list');
                const ruleItem = document.createElement('div');
                ruleItem.className = `rule-item ${action}`;
                ruleItem.innerHTML = `<strong>${action === 'allow' ? 'Allow' : 'Block'} ${description}</strong><br>Protocol: ${protocol}, Port: ${port}`;
                rulesList.appendChild(ruleItem);
            });
        });
    </script>
</body>
</html>